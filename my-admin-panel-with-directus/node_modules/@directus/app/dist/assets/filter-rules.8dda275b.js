import{r as o,p as i,q as d,w as n,B as t,t as s,P as l}from"./vendor.62143b15.js";const c={class:"markdown-body"},h=t("blockquote",null,[t("p",null,[l("Permissions, validation, and the API\u2019s "),t("code",null,"filter"),l(" parameter all rely on a specific JSON structure to define their rules. This page describes the syntax for creating flat, relational, or complex filter rules.")])],-1),_=t("p",null,[t("div",{class:"table-of-contents"},[t("ul",null,[t("li",null,[t("a",{href:"#syntax"},"Syntax")]),t("li",null,[t("a",{href:"#filter-operators"},"Filter Operators")]),t("li",null,[t("a",{href:"#relational"},"Relational")]),t("li",null,[t("a",{href:"#logical-operators"},"Logical Operators")]),t("li",null,[t("a",{href:"#dynamic-variables"},"Dynamic Variables")])])])],-1),p=t("h2",{id:"syntax"},[l("Syntax "),t("a",{class:"header-anchor",href:"#syntax"},"#")],-1),f=t("strong",null,"Field",-1),g=l(" \u2014 Any valid root field, "),m=l("relational field"),y=l(", or "),b=l("logical operator"),j=t("strong",null,"Operator",-1),v=l(" \u2014 Any valid "),x=l("API operator"),w=l(" prefaced with an underscore"),R=t("strong",null,"Value",-1),O=l(" \u2014 Any valid static value, or "),E=l("dynamic variable"),N=t("pre",null,[t("code",null,`{
	<field>: {
		<operator>: <value>
	}
}
`)],-1),q=t("h3",{id:"examples"},[l("Examples "),t("a",{class:"header-anchor",href:"#examples"},"#")],-1),T=t("pre",null,[t("code",{class:"language-json"},[l(`{
	`),t("span",{class:"hljs-attr"},'"title"'),l(`: {
		`),t("span",{class:"hljs-attr"},'"_contains"'),l(": "),t("span",{class:"hljs-string"},'"Directus"'),l(`
	}
}
`)])],-1),k=t("pre",null,[t("code",{class:"language-json"},[l(`{
	`),t("span",{class:"hljs-attr"},'"owner"'),l(`: {
		`),t("span",{class:"hljs-attr"},'"_eq"'),l(": "),t("span",{class:"hljs-string"},'"$CURRENT_USER"'),l(`
	}
}
`)])],-1),D=t("pre",null,[t("code",{class:"language-json"},[l(`{
	`),t("span",{class:"hljs-attr"},'"datetime"'),l(`: {
		`),t("span",{class:"hljs-attr"},'"_lte"'),l(": "),t("span",{class:"hljs-string"},'"$NOW"'),l(`
	}
}
`)])],-1),V=t("h2",{id:"filter-operators"},[l("Filter Operators "),t("a",{class:"header-anchor",href:"#filter-operators"},"#")],-1),$=t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"Operator"),t("th",null,"Description")])]),t("tbody",null,[t("tr",null,[t("td",null,[t("code",null,"_eq")]),t("td",null,"Equal to")]),t("tr",null,[t("td",null,[t("code",null,"_neq")]),t("td",null,"Not equal to")]),t("tr",null,[t("td",null,[t("code",null,"_lt")]),t("td",null,"Less than")]),t("tr",null,[t("td",null,[t("code",null,"_lte")]),t("td",null,"Less than or equal to")]),t("tr",null,[t("td",null,[t("code",null,"_gt")]),t("td",null,"Greater than")]),t("tr",null,[t("td",null,[t("code",null,"_gte")]),t("td",null,"Greater than or equal to")]),t("tr",null,[t("td",null,[t("code",null,"_in")]),t("td",null,"Matches any of the values")]),t("tr",null,[t("td",null,[t("code",null,"_nin")]),t("td",null,"Doesn\u2019t match any of the values")]),t("tr",null,[t("td",null,[t("code",null,"_null")]),t("td",null,[l("Is "),t("code",null,"null")])]),t("tr",null,[t("td",null,[t("code",null,"_nnull")]),t("td",null,[l("Is not "),t("code",null,"null")])]),t("tr",null,[t("td",null,[t("code",null,"_contains")]),t("td",null,"Contains the substring")]),t("tr",null,[t("td",null,[t("code",null,"_ncontains")]),t("td",null,"Doesn\u2019t contain the substring")]),t("tr",null,[t("td",null,[t("code",null,"_starts_with")]),t("td",null,"Starts with")]),t("tr",null,[t("td",null,[t("code",null,"_nstarts_with")]),t("td",null,"Doesn\u2019t start with")]),t("tr",null,[t("td",null,[t("code",null,"_ends_with")]),t("td",null,"Ends with")]),t("tr",null,[t("td",null,[t("code",null,"_nends_with")]),t("td",null,"Doesn\u2019t end with")]),t("tr",null,[t("td",null,[t("code",null,"_between")]),t("td",null,"Is between two values (inclusive)")]),t("tr",null,[t("td",null,[t("code",null,"_nbetween")]),t("td",null,"Is not between two values (inclusive)")]),t("tr",null,[t("td",null,[t("code",null,"_empty")]),t("td",null,[l("Is empty ("),t("code",null,"null"),l(" or falsy)")])]),t("tr",null,[t("td",null,[t("code",null,"_nempty")]),t("td",null,[l("Is not empty ("),t("code",null,"null"),l(" or falsy)")])]),t("tr",null,[t("td",null,[t("code",null,"_intersects"),l(),t("sup",null,"[1]")]),t("td",null,"Value intersects a given point")]),t("tr",null,[t("td",null,[t("code",null,"_nintersects"),l(),t("sup",null,"[1]")]),t("td",null,"Value does not intersect a given point")]),t("tr",null,[t("td",null,[t("code",null,"_intersects_bbox"),l(),t("sup",null,"[1]")]),t("td",null,"Value is in a bounding box")]),t("tr",null,[t("td",null,[t("code",null,"_nintersects_bbox"),l(),t("sup",null,"[1]")]),t("td",null,"Value is not in a bounding box")])])],-1),I=t("p",null,[l("The following operators are "),t("strong",null,"only available in validation permissions"),l(":")],-1),S=t("table",null,[t("thead",null,[t("tr",null,[t("th",null,"Operator"),t("th",null,"Description")])]),t("tbody",null,[t("tr",null,[t("td",null,[t("code",null,"_submitted")]),t("td",null,"Field has to be submitted")]),t("tr",null,[t("td",null,[t("code",null,"_regex"),l(),t("sup",null,"[2]")]),t("td",null,"Field has to match regex")])])],-1),U=t("p",null,[t("sup",null,"[1]"),l(" Only available on Geometry types"),t("br"),t("sup",null,"[2]"),l(" JavaScript \u201Cflavor\u201D regex. Make sure to escape backslashes.")],-1),C=t("h2",{id:"relational"},[l("Relational "),t("a",{class:"header-anchor",href:"#relational"},"#")],-1),F=t("p",null,[l("You can target related values by nesting field names. For example, if you have a relational Many-to-One "),t("code",null,"author"),l(" field, you can set a rule for the "),t("code",null,"author.name"),l(" field using the following syntax.")],-1),W=t("pre",null,[t("code",{class:"language-json"},[l(`{
	`),t("span",{class:"hljs-attr"},'"author"'),l(`: {
		`),t("span",{class:"hljs-attr"},'"name"'),l(`: {
			`),t("span",{class:"hljs-attr"},'"_eq"'),l(": "),t("span",{class:"hljs-string"},'"Rijk van Zanten"'),l(`
		}
	}
}
`)])],-1),A=t("h2",{id:"logical-operators"},[l("Logical Operators "),t("a",{class:"header-anchor",href:"#logical-operators"},"#")],-1),L=t("p",null,[l("You can nest or group multiple rules using the "),t("code",null,"_and"),l(" or "),t("code",null,"_or"),l(" logical operators. Each operator holds an array of rules, allowing for more complex filtering.")],-1),B=t("pre",null,[t("code",{class:"language-json"},[l(`{
	`),t("span",{class:"hljs-attr"},'"_or"'),l(`: [
		{
			`),t("span",{class:"hljs-attr"},'"_and"'),l(`: [
				{
					`),t("span",{class:"hljs-attr"},'"owner"'),l(`: {
						`),t("span",{class:"hljs-attr"},'"_eq"'),l(": "),t("span",{class:"hljs-string"},'"$CURRENT_USER"'),l(`
					}
				},
				{
					`),t("span",{class:"hljs-attr"},'"status"'),l(`: {
						`),t("span",{class:"hljs-attr"},'"_in"'),l(": ["),t("span",{class:"hljs-string"},'"published"'),l(", "),t("span",{class:"hljs-string"},'"draft"'),l(`]
					}
				}
			]
		},
		{
			`),t("span",{class:"hljs-attr"},'"_and"'),l(`: [
				{
					`),t("span",{class:"hljs-attr"},'"owner"'),l(`: {
						`),t("span",{class:"hljs-attr"},'"_neq"'),l(": "),t("span",{class:"hljs-string"},'"$CURRENT_USER"'),l(`
					}
				},
				{
					`),t("span",{class:"hljs-attr"},'"status"'),l(`: {
						`),t("span",{class:"hljs-attr"},'"_in"'),l(": ["),t("span",{class:"hljs-string"},'"published"'),l(`]
					}
				}
			]
		}
	]
}
`)])],-1),P=t("h2",{id:"dynamic-variables"},[l("Dynamic Variables "),t("a",{class:"header-anchor",href:"#dynamic-variables"},"#")],-1),G=t("p",null,[l("In addition to static values, you can also filter against "),t("em",null,"dynamic"),l(" values using the following variables.")],-1),M=t("ul",null,[t("li",null,[t("code",null,"$CURRENT_USER"),l(" \u2014 The primary key of the currently authenticated user")]),t("li",null,[t("code",null,"$CURRENT_ROLE"),l(" \u2014 The primary key of the role for the currently authenticated user")]),t("li",null,[t("code",null,"$NOW"),l(" \u2014 The current timestamp")]),t("li",null,[t("code",null,"$NOW(<adjustment>)"),l(" - The current timestamp plus/minus a given distance, for example "),t("code",null,"$NOW(-1 year)"),l(", "),t("code",null,"$NOW(+2 hours)")])],-1),H={setup(J,{expose:r}){const a={title:"Filter Rules",modularExtension:!1};return r({frontmatter:a}),(Y,Z)=>{const e=o("router-link"),u=o("DocsWrapper");return i(),d(u,{frontmatter:a},{default:n(()=>[t("div",c,[h,_,p,t("ul",null,[t("li",null,[f,g,s(e,{to:"/docs/reference/filter-rules#relational"},{default:n(()=>[m]),_:1}),y,s(e,{to:"/docs/reference/filter-rules#logical-operators"},{default:n(()=>[b]),_:1})]),t("li",null,[j,v,s(e,{to:"/docs/reference/filter-rules#supported-operators"},{default:n(()=>[x]),_:1}),w]),t("li",null,[R,O,s(e,{to:"/docs/reference/filter-rules#dynamic-variables"},{default:n(()=>[E]),_:1})])]),N,q,T,k,D,V,$,I,S,U,C,F,W,A,L,B,P,G,M])]),_:1})}}};export{H as default};
