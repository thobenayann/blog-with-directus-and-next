import{r as o,p as c,q as r,w as s,B as e,t as d,P as t}from"./vendor.62143b15.js";const u={class:"markdown-body"},h=t("Custom Modules are completely open-ended components that allow you to create new experiences within the Directus platform. "),p=t("Learn more about Modules"),m=t("."),_=e("h2",{id:"1.-setup-the-boilerplate"},[t("1. Setup the Boilerplate "),e("a",{class:"header-anchor",href:"#1.-setup-the-boilerplate"},"#")],-1),f=e("p",null,"Every module is a standalone \u201Cpackage\u201D that contains at least a metadata file and a Vue component. We recommend using the following file structure:",-1),g=e("pre",null,[e("code",null,`src/
	index.js
	module.vue
`)],-1),b=e("h3",{id:"src%2Findex.js"},[t("src/index.js "),e("a",{class:"header-anchor",href:"#src%2Findex.js"},"#")],-1),y=e("pre",null,[e("code",{class:"language-js"},[e("span",{class:"hljs-keyword"},"import"),t(" ModuleComponent "),e("span",{class:"hljs-keyword"},"from"),t(),e("span",{class:"hljs-string"},"'./module.vue'"),t(`;

`),e("span",{class:"hljs-keyword"},"export"),t(),e("span",{class:"hljs-keyword"},"default"),t(` {
	`),e("span",{class:"hljs-attr"},"id"),t(": "),e("span",{class:"hljs-string"},"'custom'"),t(`,
	`),e("span",{class:"hljs-attr"},"name"),t(": "),e("span",{class:"hljs-string"},"'Custom'"),t(`,
	`),e("span",{class:"hljs-attr"},"icon"),t(": "),e("span",{class:"hljs-string"},"'box'"),t(`,
	`),e("span",{class:"hljs-attr"},"routes"),t(`: [
		{
			`),e("span",{class:"hljs-attr"},"path"),t(": "),e("span",{class:"hljs-string"},"''"),t(`,
			`),e("span",{class:"hljs-attr"},"component"),t(`: ModuleComponent,
		},
	],
};
`)])],-1),v=e("ul",null,[e("li",null,[e("code",null,"id"),t(" \u2014 The unique key for this module. It is good practice to scope proprietary interfaces with an author prefix.")]),e("li",null,[e("code",null,"name"),t(" \u2014 The human-readable name for this module.")]),e("li",null,[e("code",null,"icon"),t(" \u2014 An icon name from the material icon set, or the extended list of Directus custom icons.")]),e("li",null,[e("code",null,"routes"),t(" \u2014 Details the routes in your module. The routes are registered as nested routes with the module\u2019s "),e("code",null,"id"),t(" serving as the base path.")])],-1),x=e("div",{class:"tip hint"},[e("div",{class:"hint-title"},"TypeScript"),e("p",null,[t("See "),e("a",{href:"https://github.com/directus/directus/blob/20355fee5eba514dd75565f60269311187010c66/app/src/modules/types.ts#L6-L17",target:"_blank",rel:"noopener noreferrer"},"the TypeScript definition"),t(" for more info on what can go into this object.")])],-1),w=e("h3",{id:"src%2Fmodule.vue"},[t("src/module.vue "),e("a",{class:"header-anchor",href:"#src%2Fmodule.vue"},"#")],-1),j=e("pre",null,[e("code",{class:"language-vue"},`<template>
	<private-view title="My Custom Module">Content goes here...</private-view>
</template>

<script>
export default {};
<\/script>
`)],-1),k=e("h4",{id:"accessing-the-api-from-within-your-extension"},[t("Accessing the API from within your extension "),e("a",{class:"header-anchor",href:"#accessing-the-api-from-within-your-extension"},"#")],-1),T=e("p",null,[t("The Directus App\u2019s Vue app instance provides a field called "),e("code",null,"api"),t(", which can be injected into Vue components using "),e("a",{href:"https://v3.vuejs.org/guide/component-provide-inject.html",target:"_blank",rel:"noopener noreferrer"},"Vue\u2019s inject framework"),t(". This "),e("code",null,"api"),t(" field contains a property called "),e("code",null,"api"),t(", which is an authenticated Axios instance. Here\u2019s an example of how to use it:")],-1),C=e("pre",null,[e("code",{class:"language-vue"},`<template>
	<private-view title="Example Collection List">
		<v-list>
			<v-list-item v-for="col in collections" v-bind:key="col.collection">
				{{ col.collection }}
			</v-list-item>
		</v-list>
		<v-button v-on:click="logToConsole">Log collections to console</v-button>
	</private-view>
</template>

<script>
export default {
	data() {
		return {
			collections: null,
		};
	},
	methods: {
		logToConsole: function () {
			console.log(this.collections);
		},
	},
	inject: ['api'],
	mounted() {
		// log the system field so you can see what attributes are available under it
		// remove this line when you're done.
		console.log(this.api);

		// Get a list of all available collections to use with this module
		this.api.get('/collections?limit=-1').then((res) => {
			this.collections = res.data.data;
		});
	},
};
<\/script>
`)],-1),D=e("p",null,"In the above example, you can see that:",-1),A=e("ul",null,[e("li",null,[t("The "),e("code",null,"api"),t(" field gets injected into the component and becomes available as an attribute of the component (ie "),e("code",null,"this.api"),t(")")]),e("li",null,[t("When the component is mounted, it uses "),e("code",null,"this.api.get"),t(" to request a list of all available collections")]),e("li",null,"The names of the collections are rendered into a list in the component\u2019s template"),e("li",null,"a button is added with a method the logs all the data for the collections to the console")],-1),V=e("p",null,[t("This is just a basic example. A more efficient way to access and work with the list of collections would be to get an instance of the "),e("code",null,"collectionsStore"),t(" using "),e("code",null,"store.useCollectionsStore()"),t(", but that\u2019s beyond the scope of this guide")],-1),I=e("h4",{id:"available-props"},[t("Available Props "),e("a",{class:"header-anchor",href:"#available-props"},"#")],-1),L=e("p",null,"If you setup a route with a parameter, you can pass it in as a prop.",-1),M=e("h2",{id:"2.-install-dependencies"},[t("2. Install Dependencies "),e("a",{class:"header-anchor",href:"#2.-install-dependencies"},"#")],-1),S=e("p",null,"Set up a package.json file by running:",-1),B=e("pre",null,[e("code",{class:"language-bash"},`npm init -y
`)],-1),F=e("p",null,[t("To be read by the Admin App, your custom module\u2019s Vue component must first be bundled into a single "),e("code",null,"index.js"),t(" file. We recommend bundling your code using the directus-extension CLI from our "),e("code",null,"@directus/extensions-sdk"),t(" package. The CLI internally uses a Rollup configuration tailored specifically to bundling Directus extensions. To install the Extension SDK, run this command:")],-1),W=e("pre",null,[e("code",{class:"language-bash"},`npm i -D @directus/extensions-sdk
`)],-1),q=e("p",null,[t("For the directus-extension CLI to recognize the extension type, the input path and the output path, add this field to the root of the "),e("code",null,"package.json"),t(" file:")],-1),E=e("pre",null,[e("code",{class:"language-json"},`"directus:extension": {
	"type": "module",
	"path": "dist/index.js",
	"source": "src/index.js",
	"host": "^9.0.0-rc.92",
	"hidden": false
}
`)],-1),N=e("h2",{id:"3.-develop-your-custom-module"},[t("3. Develop Your Custom Module "),e("a",{class:"header-anchor",href:"#3.-develop-your-custom-module"},"#")],-1),P=e("p",null,"The module itself is simply a Vue component, which provides an blank canvas for creating anything you need.",-1),K=e("h2",{id:"4.-build-and-deploy"},[t("4. Build and Deploy "),e("a",{class:"header-anchor",href:"#4.-build-and-deploy"},"#")],-1),z=e("p",null,"To build the module for use within Directus, run:",-1),G=e("pre",null,[e("code",{class:"language-bash"},`npx directus-extension build
`)],-1),H=e("p",null,[t("Finally, move the output from your module\u2019s "),e("code",null,"dist"),t(" folder into your project\u2019s "),e("code",null,"/extensions/modules/my-custom-module"),t(" folder. Keep in mind that the extensions directory is configurable within your env file, and may be located elsewhere.")],-1),Q={setup(R,{expose:l}){const n={title:"Custom Modules",modularExtension:!0};return l({frontmatter:n}),(Y,J)=>{const i=o("router-link"),a=o("DocsWrapper");return c(),r(a,{frontmatter:n},{default:s(()=>[e("div",u,[e("blockquote",null,[e("p",null,[h,d(i,{to:"/docs/concepts/modules/"},{default:s(()=>[p]),_:1}),m])]),_,f,g,b,y,v,x,w,j,k,T,C,D,A,V,I,L,M,S,B,F,W,q,E,N,P,K,z,G,H])]),_:1})}}};export{Q as default};
