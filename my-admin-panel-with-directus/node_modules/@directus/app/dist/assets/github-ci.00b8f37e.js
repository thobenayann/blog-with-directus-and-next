import{r as n,p as a,q as i,w as o,B as e,t as c,P as t}from"./vendor.62143b15.js";const d={class:"markdown-body"},h=t("This guide explains how to publish a forked version of Directus on NPM, dockerhub and GHCR. You need to first "),p=t("create a fork"),m=e("div",{class:"warning hint"},[e("div",{class:"hint-title"},"Using a fork in production is neither supported nor recommended."),e("p",null,"Only do so if:"),e("ol",null,[e("li",null,"The feature you want to implement doesn\u2019t satisfy the 80/20 principle"),e("li",null,"There is a technical limitation preventing you from implementing it as an extension")]),e("p",null,"Forks are not officially supported - please don\u2019t submit fork-specific bugs and questions on the official repo."),e("p",null,[t("If you suspect a bug to not be part of your changes please confirm this by reproducing it with the official version "),e("strong",null,"before"),t(" submitting an issue.")])],-1),_=e("div",{class:"tip hint"},[e("div",{class:"hint-title"},"Minimum Requirements"),e("p",null,"If you want to publish your fork to hub.docker.com or NPM you need to have an account there."),e("p",null,"Note: to publish to NPM you probably have to change all the package names. Publishing to NPM should almost never be necessary.")],-1),f=e("h2",{id:"1.-setup-environment-variables%2Fsecrets"},[t("1. Setup environment variables/secrets "),e("a",{class:"header-anchor",href:"#1.-setup-environment-variables%2Fsecrets"},"#")],-1),b=e("h2",{id:"general"},[t("General "),e("a",{class:"header-anchor",href:"#general"},"#")],-1),g=e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"Variable"),e("th",null,"Description"),e("th",null,"Example")])]),e("tbody",null,[e("tr",null,[e("td",null,[e("code",null,"GHCR_IMAGE")]),e("td",null,"Image name for GitHub Container Registry. Be sure to use the full URL."),e("td",null,[e("code",null,"ghcr.io/directus/directus")])]),e("tr",null,[e("td",null,[e("code",null,"DOCKERHUB_IMAGE")]),e("td",null,"Image name for hub.docker.com, no prefix."),e("td",null,[e("code",null,"directus/directus")])])])],-1),k=e("table",null,[e("thead",null,[e("tr",null,[e("th",null,"Secret"),e("th",null,"Description"),e("th",null,"Example")])]),e("tbody",null,[e("tr",null,[e("td",null,[e("code",null,"NPM_TOKEN")]),e("td",null,"Your NPM token. Make sure to use the type \u201Cautomation\u201D."),e("td",null,[e("code",null,"12345678-...")])]),e("tr",null,[e("td",null,[e("code",null,"DOCKERHUB_USERNAME")]),e("td",null,"Dockerhub Username"),e("td",null,[e("code",null,"directus")])]),e("tr",null,[e("td",null,[e("code",null,"DOCKERHUB_PASSWORD")]),e("td",null,"Dockerhub Password"),e("td",null,[e("code",null,"hunter2")])])])],-1),y=e("h2",{id:"2.-create-a-release"},[t("2. Create a release "),e("a",{class:"header-anchor",href:"#2.-create-a-release"},"#")],-1),v=e("pre",null,[e("code",{class:"language-bash"},`npm run release
`)],-1),x={setup(N,{expose:s}){const l={title:"GitHub CI",modularExtension:!1};return s({frontmatter:l}),(D,E)=>{const r=n("router-link"),u=n("DocsWrapper");return a(),i(u,{frontmatter:l},{default:o(()=>[e("div",d,[e("blockquote",null,[e("p",null,[h,c(r,{to:"/docs/contributing/running-locally/"},{default:o(()=>[p]),_:1})])]),m,_,f,b,g,k,y,v])]),_:1})}}};export{x as default};
