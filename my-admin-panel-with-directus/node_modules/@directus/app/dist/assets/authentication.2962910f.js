import{r,p as h,q as d,w as t,B as e,t as n,P as s}from"./vendor.62143b15.js";const c={class:"markdown-body"},u={class:"two-up"},p={class:"left"},_=s("By default, all data in the system is off limits for unauthenticated users. To gain access to protected data, you must include an access token with every request, or "),g=s("configure permissions for the public role"),f=s("."),v=e("div",{class:"right"},[e("p",null,[e("div",{class:"table-of-contents"},[e("ul",null,[e("li",null,[e("a",{href:"#login"},"Login")]),e("li",null,[e("a",{href:"#refresh"},"Refresh")]),e("li",null,[e("a",{href:"#logout"},"Logout")]),e("li",null,[e("a",{href:"#request-password-reset"},"Request Password Reset")]),e("li",null,[e("a",{href:"#reset-a-password"},"Reset a Password")]),e("li",null,[e("a",{href:"#list-oauth-providers"},"List oAuth providers")]),e("li",null,[e("a",{href:"#login-using-oauth-provider"},"Login using oAuth provider")])])])])],-1),m=e("hr",null,null,-1),w=e("h2",{id:"login"},[s("Login "),e("a",{class:"header-anchor",href:"#login"},"#")],-1),b=e("p",null,"Retrieve a temporary access token and refresh token.",-1),k={class:"two-up"},q={class:"left"},y=e("h3",{id:"request-body"},[s("Request Body "),e("a",{class:"header-anchor",href:"#request-body"},"#")],-1),j=e("div",{class:"definitions"},[e("p",null,[e("code",null,"email"),s(),e("strong",null,"Required"),e("br"),s(" Email address of the user you\u2019re retrieving the access token for.")]),e("p",null,[e("code",null,"password"),s(),e("strong",null,"Required"),e("br"),s(" Password of the user.")]),e("p",null,[e("code",null,"otp"),e("br"),s(" The user\u2019s one-time-password (if MFA is enabled).")]),e("p",null,[e("code",null,"mode"),e("br"),s(" Whether to retrieve the refresh token in the JSON response, or in a "),e("code",null,"httpOnly"),s(),e("code",null,"secure"),s(" cookie. One of "),e("code",null,"json"),s(", "),e("code",null,"cookie"),s(". Defaults to "),e("code",null,"json"),s(".")])],-1),T=e("h3",{id:"response-attributes"},[s("Response Attributes "),e("a",{class:"header-anchor",href:"#response-attributes"},"#")],-1),R=e("div",{class:"definitions"},[e("p",null,[e("code",null,"access_token"),s(),e("strong",null,"string"),e("br"),s(" Temporary access token to be used in follow-up requests.")]),e("p",null,[e("code",null,"expires"),s(),e("strong",null,"integer"),e("br"),s(" How long before the access token will expire. Value is in milliseconds.")]),e("p",null,[e("code",null,"refresh_token"),s(),e("strong",null,"string"),e("br"),s(" The token that can be used to retrieve a new access token through "),e("a",{href:"#refresh"},[e("code",null,"/auth/refresh")]),s(". Note: if you used "),e("code",null,"cookie"),s(" as the mode in the request, the refresh token won\u2019t be returned in the JSON.")])],-1),P={class:"tip hint"},S=e("div",{class:"hint-title"},"Expiry time",-1),A=s("The token\u2019s expiration time can be configured through "),O=s("the "),L=e("code",null,"ACCESS_TOKEN_TTL",-1),x=s(" environment variable"),E=s("."),B=e("div",{class:"right"},[e("h3",{id:"rest-api"},[s("REST API "),e("a",{class:"header-anchor",href:"#rest-api"},"#")]),e("pre",null,[e("code",null,`POST /auth/login
`)]),e("pre",null,[e("code",{class:"language-json"},[s(`{
	`),e("span",{class:"hljs-attr"},'"email"'),s(": "),e("span",{class:"hljs-string"},'"admin@example.com"'),s(`,
	`),e("span",{class:"hljs-attr"},'"password"'),s(": "),e("span",{class:"hljs-string"},'"d1r3ct5us"'),s(`
}
`)])]),e("h3",{id:"graphql"},[s("GraphQL "),e("a",{class:"header-anchor",href:"#graphql"},"#")]),e("pre",null,[e("code",null,`POST /graphql/system
`)]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"mutation"),s(` {
	auth_login(email: `),e("span",{class:"hljs-string"},'"admin@example.com"'),s(", password: "),e("span",{class:"hljs-string"},'"d1r3ctu5"'),s(`) {
		access_token
		refresh_token
	}
}
`)])])],-1),N=e("hr",null,null,-1),G=e("h2",{id:"refresh"},[s("Refresh "),e("a",{class:"header-anchor",href:"#refresh"},"#")],-1),I=e("p",null,"Retrieve a new access token using a refresh token.",-1),C=e("div",{class:"two-up"},[e("div",{class:"left"},[e("h3",{id:"request-body-2"},[s("Request Body "),e("a",{class:"header-anchor",href:"#request-body-2"},"#")]),e("div",{class:"definitions"},[e("p",null,[e("code",null,"refresh_token"),e("br"),s(" The refresh token to use. If you have the refresh token in a cookie through "),e("a",{href:"#login"},[e("code",null,"/auth/login")]),s(", you don\u2019t have to submit it here.")])]),e("h3",{id:"response-attributes-2"},[s("Response Attributes "),e("a",{class:"header-anchor",href:"#response-attributes-2"},"#")]),e("div",{class:"definitions"},[e("p",null,[e("code",null,"access_token"),s(),e("strong",null,"string"),e("br"),s(" Temporary access token to be used in follow-up requests.")]),e("p",null,[e("code",null,"expires"),s(),e("strong",null,"integer"),e("br"),s(" How long before the access token will expire. Value is in milliseconds.")]),e("p",null,[e("code",null,"refresh_token"),s(),e("strong",null,"string"),e("br"),s(" The token that can be used to retrieve a new access token through "),e("a",{href:"#refresh"},[e("code",null,"/auth/refresh")]),s(". Note: if you used "),e("code",null,"cookie"),s(" as the mode in the request, the refresh token won\u2019t be returned in the JSON.")])])]),e("div",{class:"right"},[e("h3",{id:"rest-api-2"},[s("REST API "),e("a",{class:"header-anchor",href:"#rest-api-2"},"#")]),e("pre",null,[e("code",null,`POST /auth/refresh
`)]),e("pre",null,[e("code",{class:"language-json"},[s(`{
	`),e("span",{class:"hljs-attr"},'"refresh_token"'),s(": "),e("span",{class:"hljs-string"},'"gmPd...8wuB"'),s(`
}
`)])]),e("h3",{id:"graphql-2"},[s("GraphQL "),e("a",{class:"header-anchor",href:"#graphql-2"},"#")]),e("pre",null,[e("code",null,`POST /graphql/system
`)]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"mutation"),s(` {
	auth_refresh(refresh_token: `),e("span",{class:"hljs-string"},'"abc...def"'),s(`) {
		access_token
		refresh_token
	}
}
`)])])])],-1),W=e("hr",null,null,-1),J=e("h2",{id:"logout"},[s("Logout "),e("a",{class:"header-anchor",href:"#logout"},"#")],-1),Q=e("p",null,"Invalidate the refresh token thus destroying the user\u2019s session.",-1),V=e("div",{class:"two-up"},[e("div",{class:"left"},[e("h3",{id:"request-body-3"},[s("Request Body "),e("a",{class:"header-anchor",href:"#request-body-3"},"#")]),e("div",{class:"definitions"},[e("p",null,[e("code",null,"refresh_token"),e("br"),s(" The refresh token to invalidate. If you have the refresh token in a cookie through "),e("a",{href:"#login"},[e("code",null,"/auth/login")]),s(", you don\u2019t have to submit it here.")])])]),e("div",{class:"right"},[e("h3",{id:"rest-api-3"},[s("REST API "),e("a",{class:"header-anchor",href:"#rest-api-3"},"#")]),e("pre",null,[e("code",null,`POST /auth/logout
`)]),e("pre",null,[e("code",{class:"language-json"},[s(`{
	`),e("span",{class:"hljs-attr"},'"refresh_token"'),s(": "),e("span",{class:"hljs-string"},'"gmPd...8wuB"'),s(`
}
`)])]),e("h3",{id:"graphql-3"},[s("GraphQL "),e("a",{class:"header-anchor",href:"#graphql-3"},"#")]),e("pre",null,[e("code",null,`POST /graphql/system
`)]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"mutation"),s(` {
	auth_logout(refresh_token: `),e("span",{class:"hljs-string"},'"gmPd...8wuB"'),s(`)
}
`)])])])],-1),D=e("hr",null,null,-1),H=e("h2",{id:"request-password-reset"},[s("Request Password Reset "),e("a",{class:"header-anchor",href:"#request-password-reset"},"#")],-1),K=e("p",null,"Request a password reset email to be sent to the given user.",-1),U={class:"two-up"},F={class:"left"},M=e("h3",{id:"request-body-4"},[s("Request Body "),e("a",{class:"header-anchor",href:"#request-body-4"},"#")],-1),Y={class:"definitions"},z=e("p",null,[e("code",null,"email"),s(),e("strong",null,"Required"),e("br"),s(" Email address of the user you\u2019re requesting a password reset for.")],-1),X=e("code",null,"reset_url",-1),Z=e("br",null,null,-1),$=s(" Provide a custom reset url which the link in the email will lead to. The reset token will be passed as a parameter."),ee=e("br",null,null,-1),se=e("strong",null,"Note",-1),te=s(": You need to configure the "),oe=e("code",null,"PASSWORD_RESET_URL_ALLOW_LIST",-1),ne=s(" environment variable"),le=s(" to enable this feature."),re=e("div",{class:"right"},[e("h3",{id:"rest-api-4"},[s("REST API "),e("a",{class:"header-anchor",href:"#rest-api-4"},"#")]),e("pre",null,[e("code",null,`POST /auth/password/request
`)]),e("pre",null,[e("code",{class:"language-json"},[s(`{
	`),e("span",{class:"hljs-attr"},'"email"'),s(": "),e("span",{class:"hljs-string"},'"admin@example.com"'),s(`
}
`)])]),e("h3",{id:"graphql-4"},[s("GraphQL "),e("a",{class:"header-anchor",href:"#graphql-4"},"#")]),e("pre",null,[e("code",null,`POST /graphql/system
`)]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"mutation"),s(` {
	auth_password_request(email: `),e("span",{class:"hljs-string"},'"admin@example.com"'),s(`)
}
`)])])],-1),ae=e("hr",null,null,-1),ie=e("h2",{id:"reset-a-password"},[s("Reset a Password "),e("a",{class:"header-anchor",href:"#reset-a-password"},"#")],-1),he=e("p",null,"The request a password reset endpoint sends an email with a link to the admin app (or a custom route) which in turn uses this endpoint to allow the user to reset their password.",-1),de=e("div",{class:"two-up"},[e("div",{class:"left"},[e("h3",{id:"request-body-5"},[s("Request Body "),e("a",{class:"header-anchor",href:"#request-body-5"},"#")]),e("div",{class:"definitions"},[e("p",null,[e("code",null,"token"),s(),e("strong",null,"Required"),e("br"),s(" Password reset token, as provided in the email sent by the request endpoint.")]),e("p",null,[e("code",null,"password"),s(),e("strong",null,"Required"),e("br"),s(" New password for the user.")])])]),e("div",{class:"right"},[e("h3",{id:"rest-api-5"},[s("REST API "),e("a",{class:"header-anchor",href:"#rest-api-5"},"#")]),e("pre",null,[e("code",null,`POST /auth/password/reset
`)]),e("pre",null,[e("code",{class:"language-json"},[s(`{
	`),e("span",{class:"hljs-attr"},'"token"'),s(": "),e("span",{class:"hljs-string"},'"eyJh...KmUk"'),s(`,
	`),e("span",{class:"hljs-attr"},'"password"'),s(": "),e("span",{class:"hljs-string"},'"d1r3ctu5"'),s(`
}
`)])]),e("h3",{id:"graphql-5"},[s("GraphQL "),e("a",{class:"header-anchor",href:"#graphql-5"},"#")]),e("pre",null,[e("code",null,`POST /graphql/system
`)]),e("pre",null,[e("code",{class:"language-graphql"},[e("span",{class:"hljs-keyword"},"mutation"),s(` {
	auth_password_reset(token: `),e("span",{class:"hljs-string"},'"eyJh...KmUk"'),s(", password: "),e("span",{class:"hljs-string"},'"d1r3ctu5"'),s(`)
}
`)])])])],-1),ce=e("hr",null,null,-1),ue=e("h2",{id:"list-oauth-providers"},[s("List oAuth providers "),e("a",{class:"header-anchor",href:"#list-oauth-providers"},"#")],-1),pe=e("p",null,"List all the configured oAuth providers.",-1),_e={class:"two-up"},ge={class:"left"},fe={class:"tip hint"},ve=e("div",{class:"hint-title"},"Configuring oAuth",-1),me=s("To learn more about setting up oAuth providers, see "),we=s("Configuring SSO through oAuth"),be=s("."),ke=e("h3",{id:"response-attributes-3"},[s("Response Attributes "),e("a",{class:"header-anchor",href:"#response-attributes-3"},"#")],-1),qe=e("div",{class:"definitions"},[e("p",null,[e("code",null,"data"),s(),e("strong",null,"Array"),e("br"),s(" Array of configured oAuth providers.")])],-1),ye=e("div",{class:"right"},[e("pre",null,[e("code",null,`GET /auth/oauth
`)]),e("pre",null,[e("code",{class:"language-json"},[s(`{
	`),e("span",{class:"hljs-attr"},'"data"'),s(": ["),e("span",{class:"hljs-string"},'"GitHub"'),s(", "),e("span",{class:"hljs-string"},'"Google"'),s(", "),e("span",{class:"hljs-string"},'"Okta"'),s(`]
}
`)])])],-1),je=e("hr",null,null,-1),Te=e("h2",{id:"login-using-oauth-provider"},[s("Login using oAuth provider "),e("a",{class:"header-anchor",href:"#login-using-oauth-provider"},"#")],-1),Re=e("p",null,"Will redirect to the configured oAuth provider for the user to login.",-1),Pe=e("div",{class:"two-up"},[e("div",{class:"right"},[e("pre",null,[e("code",null,`GET /auth/oauth/:provider
`)])])],-1),Se=e("hr",null,null,-1),Ee={setup(Ae,{expose:a}){const l={title:"Authentication",modularExtension:!1,pageClass:"page-reference"};return a({frontmatter:l}),(Oe,Le)=>{const o=r("router-link"),i=r("DocsWrapper");return h(),d(i,{frontmatter:l},{default:t(()=>[e("div",c,[e("div",u,[e("div",p,[e("blockquote",null,[e("p",null,[_,n(o,{to:"/docs/guides/roles-and-permissions"},{default:t(()=>[g]),_:1}),f])])]),v]),m,w,b,e("div",k,[e("div",q,[y,j,T,R,e("div",P,[S,e("p",null,[A,n(o,{to:"/docs/reference/environment-variables"},{default:t(()=>[O,L,x]),_:1}),E])])]),B]),N,G,I,C,W,J,Q,V,D,H,K,e("div",U,[e("div",F,[M,e("div",Y,[z,e("p",null,[X,Z,$,ee,se,te,n(o,{to:"/docs/reference/environment-variables/#security"},{default:t(()=>[oe,ne]),_:1}),le])])]),re]),ae,ie,he,de,ce,ue,pe,e("div",_e,[e("div",ge,[e("div",fe,[ve,e("p",null,[me,n(o,{to:"/docs/guides/api-config/#oauth-single-sign-on-sso-openid"},{default:t(()=>[we]),_:1}),be])]),ke,qe]),ye]),je,Te,Re,Pe,Se])]),_:1})}}};export{Ee as default};
